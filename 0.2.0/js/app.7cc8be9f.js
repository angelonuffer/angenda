(function(t){function a(a){for(var n,i,o=a[0],c=a[1],d=a[2],l=0,m=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(a);while(m.length)m.shift()();return s.push.apply(s,d||[]),e()}function e(){for(var t,a=0;a<s.length;a++){for(var e=s[a],n=!0,o=1;o<e.length;o++){var c=e[o];0!==r[c]&&(n=!1)}n&&(s.splice(a--,1),t=i(i.s=e[0]))}return t}var n={},r={app:0},s=[];function i(a){if(n[a])return n[a].exports;var e=n[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=n,i.d=function(t,a,e){i.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,a){if(1&a&&(t=i(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var n in t)i.d(e,n,function(a){return t[a]}.bind(null,n));return e},i.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(a,"a",a),a},i.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=a,o=o.slice();for(var d=0;d<o.length;d++)a(o[d]);var u=c;s.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"56d7":function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var n=e("2b0e"),r=e("43f9"),s=e.n(r),i=(e("51de"),e("e094"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("transacoes")}),o=[],c=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("md-content",{staticStyle:{"max-width":"500px"}},[e("md-dialog",{attrs:{"md-active":t.abrir_diálogo_adicionar_transação},on:{"update:mdActive":function(a){t.abrir_diálogo_adicionar_transação=a},"update:md-active":function(a){t.abrir_diálogo_adicionar_transação=a}}},[e("md-dialog-title",[t._v(t._s(t.editando_transação?"Editar":"Adicionar")+" transação")]),e("md-datepicker",{model:{value:t.data,callback:function(a){t.data=a},expression:"data"}}),e("md-field",[e("label",[t._v("Descrição")]),e("md-input",{model:{value:t.descrição,callback:function(a){t.descrição=a},expression:"descrição"}})],1),e("md-field",[e("label",[t._v("Valor")]),e("span",{staticClass:"md-prefix"},[t._v("R$")]),e("md-input",{attrs:{type:"number",step:"0.01"},model:{value:t.valor,callback:function(a){t.valor=a},expression:"valor"}})],1),e("md-checkbox",{model:{value:t.repetir_mensalmente,callback:function(a){t.repetir_mensalmente=a},expression:"repetir_mensalmente"}},[t._v("Repetir mensalmente")]),e("md-dialog-actions",[e("md-button",{staticClass:"md-primary",on:{click:function(a){t.abrir_diálogo_adicionar_transação=!1}}},[t._v("Cancelar")]),e("md-button",{staticClass:"md-primary",on:{click:function(a){t.adicionar_transação()}}},[t._v("Ok")])],1)],1),e("md-toolbar",[e("md-menu",[e("md-button",{attrs:{"md-menu-trigger":""}},[t._v(t._s(t.mês))]),e("md-menu-content",t._l(t.possíveis_meses,(function(a,n){return e("md-menu-item",{key:n,on:{click:function(e){t.mês=a}}},[e("span",[t._v(t._s(a))])])})),1)],1),e("div",{staticClass:"md-toolbar-section-end"},[e("md-button",{staticClass:"md-icon-button",on:{click:function(a){t.editando_transação=!1,t.abrir_diálogo_adicionar_transação=!0}}},[e("md-icon",[t._v("add")])],1)],1)],1),t._l(t.dias,(function(a,n){return e("md-list",{key:n},[e("md-subheader",{staticStyle:{"background-color":"lightgray"}},[t._v(t._s(a.id))]),t._l(a.transações.filter((function(a){return a.mês===t.mês})),(function(a,n){return e("md-list-item",{key:n},[e("md-checkbox",{staticStyle:{display:"none"}}),a.data<=t.agora?e("md-checkbox",{staticClass:"confirmar_transação",on:{change:function(e){t.atualizar_transação(a)}},model:{value:a.realizada,callback:function(e){t.$set(a,"realizada",e)},expression:"transação.realizada"}}):t._e(),e("span",{staticClass:"md-list-item-text"},[t._v(t._s(a.descrição))]),e("span",{class:a.valor<0?"valor_negativo":""},[t._v(t._s(t.brl(a.valor)))]),e("md-menu",[e("md-button",{staticClass:"md-icon-button md-list-action",attrs:{"md-menu-trigger":""}},[e("md-icon",[t._v("more_vert")])],1),e("md-menu-content",[e("md-menu-item",{on:{click:function(e){t.editar_transação(a)}}},[e("md-icon",[t._v("edit")]),e("span",[t._v("Editar")])],1),e("md-menu-item",{on:{click:function(e){t.remover_transação(a)}}},[e("md-icon",[t._v("delete")]),e("span",[t._v("Remover")])],1)],1)],1)],1)})),e("md-list-item",[e("span",{staticClass:"md-list-item-text"}),e("span",{class:t.saldo_dia(a)<0?"valor_negativo":""},[t._v(t._s(t.brl(t.saldo_dia(a))))])])],2)})),e("md-list",[e("md-subheader",{staticStyle:{"background-color":"lightgray"}},[t._v("Saldo")]),e("md-list-item",[e("span",[t._v("Atual")]),e("span",{class:t.saldo_atual<0?"valor_negativo":""},[t._v(t._s(t.brl(t.saldo_atual)))])]),e("md-list-item",[e("span",[t._v("Inicial")]),e("span",{class:t.saldo_inicial<0?"valor_negativo":""},[t._v(t._s(t.brl(t.saldo_inicial)))])]),e("md-list-item",[e("span",[t._v("Final")]),e("span",{class:t.saldo_final<0?"valor_negativo":""},[t._v(t._s(t.brl(t.saldo_final)))])])],1),e("md-list",[e("md-subheader",{staticStyle:{"background-color":"lightgray"}},[t._v("Alterações no mês")]),e("md-list-item",[e("span",[t._v("Receitas")]),e("span",{class:t.receitas<0?"valor_negativo":""},[t._v(t._s(t.brl(t.receitas)))])]),e("md-list-item",[e("span",[t._v("Despesas mensais")]),e("span",{class:t.despesas_mensais<0?"valor_negativo":""},[t._v(t._s(t.brl(t.despesas_mensais)))])]),e("md-list-item",[e("span",[t._v("Despesas esporádicas")]),e("span",{class:t.despesas_esporádicas<0?"valor_negativo":""},[t._v(t._s(t.brl(t.despesas_esporádicas)))])]),e("md-list-item",[e("span",[t._v("Variação do mês")]),e("span",{class:t.variação<0?"valor_negativo":""},[t._v(t._s(t.brl(t.variação)))])])],1)],2)},d=[],u=(e("4d90"),e("d3b7"),e("25f0"),e("7db0"),e("a434"),e("4e82"),e("a630"),e("3ca3"),e("6062"),e("ddb0"),e("d81d"),e("4de4"),e("1da1")),l=e("3835"),m=(e("96cf"),e("159b"),e("a15b"),e("e9c4"),indexedDB.open(location.pathname,1));m.onupgradeneeded=function(t){var a=t.target.result;a.createObjectStore("transações",{keyPath:"id",autoIncrement:!0})},m.onsuccess=function(t){var a=t.target.result;f=function(t){return t(a)},_.forEach(f)};var _=[],f=function(t){_.push(t)},p=[],v=[],h={adicionar:function(t,a){f((function(e){return e.transaction([t],"readwrite").objectStore(t).add(a).onsuccess=function(e){var n=e.target.result;a.id=n,p.forEach((function(e){var n=Object(l["a"])(e,2),r=n[0],s=n[1];t===r&&s(a)}))}}))},ao_adicionar:function(t,a){f((function(e){return e.transaction([t]).objectStore(t).openCursor().onsuccess=function(t){var e=t.target.result;e&&(a(e.value),e.continue())}})),p.push([t,a])},remover:function(t,a){f((function(e){return e.transaction([t],"readwrite").objectStore(t).delete(a).onsuccess=function(){v.forEach((function(e){var n=Object(l["a"])(e,2),r=n[0],s=n[1];t===r&&s(a)}))}}))},ao_remover:function(t,a){v.push([t,a])},atualizar:function(t,a){f((function(e){return e.transaction([t],"readwrite").objectStore(t).put(a)}))}};window.salvar=function(){var t=[];f((function(a){return a.transaction(["transações"]).objectStore("transações").openCursor().onsuccess=function(a){var e=a.target.result;e?(t.push(e.value),e.continue()):Object(u["a"])(regeneratorRuntime.mark((function a(){var e,n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=new Date,a.next=3,window.showSaveFilePicker({suggestedName:[e.getFullYear(),(e.getMonth()+1).toString().padStart(2,0),e.getDate().toString().padStart(2,0),e.getHours(),e.getMinutes(),e.getSeconds()].join("-")+".json"});case 3:return n=a.sent,a.next=6,n.createWritable();case 6:return r=a.sent,a.next=9,r.write(new Blob([JSON.stringify(t)],{type:"application/json"}));case 9:return a.next=11,r.close();case 11:case"end":return a.stop()}}),a)})))()}}))};var b=new Date,g=b.getFullYear()+"-"+(b.getMonth()+1).toString().padStart(2,0),y=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}),S={data:function(){return{agora:b,"mês":g,"abrir_diálogo_adicionar_transação":!1,"editando_transação":!1,data:b,"descrição":"",valor:0,repetir_mensalmente:!1,"transações":[],realizada:[]}},created:function(){var t=this;h.ao_adicionar("transações",(function(a){return t.transações.push(a)})),h.ao_remover("transações",(function(a){return t.transações.find((function(e,n){if(e.id===a)return t.transações.splice(n,1),!0}))}))},computed:{"possíveis_meses":function(){return Array.from(new Set(this.transações.map((function(t){return t.mês})))).sort()},dias:function(){var t=this;return this.transações.reduce((function(a,e){if(e.mês!==t.mês)return a;for(var n=e.data.getDate().toString().padStart(2,0)+" - "+["DOM","SEG","TER","QUA","QUI","SEX","SAB"][e.data.getDay()],r=0;r<a.length;r++){if(a[r].id>n)return a.splice(r,0,{id:n,"transações":[e]}),a;if(a[r].id===n)return a[r].transações.push(e),a}return a.push({id:n,"transações":[e]}),a}),[])},saldo_atual:function(){return this.transações.filter((function(t){return t.realizada})).map((function(t){return t.valor})).reduce((function(t,a){return t+a}),0)},saldo_inicial:function(){var t=this;return this.transações.filter((function(a){return a.mês<t.mês})).map((function(t){return t.valor})).reduce((function(t,a){return t+a}),0)},saldo_final:function(){return this.saldo_inicial+this.variação},receitas:function(){var t=this;return this.transações.filter((function(a){return a.mês===t.mês&&a.valor>0})).map((function(t){return t.valor})).reduce((function(t,a){return t+a}),0)},despesas_mensais:function(){var t=this;return this.transações.filter((function(a){return a.mês===t.mês&&a.valor<0&&a.repetir_mensalmente})).map((function(t){return t.valor})).reduce((function(t,a){return t+a}),0)},"despesas_esporádicas":function(){var t=this;return this.transações.filter((function(a){return a.mês===t.mês&&a.valor<0&&!a.repetir_mensalmente})).map((function(t){return t.valor})).reduce((function(t,a){return t+a}),0)},"variação":function(){return this.receitas+this.despesas_mensais+this.despesas_esporádicas}},methods:{"adicionar_transação":function(){this.editando_transação?(this.editando_transação.data=this.data,this.editando_transação.descrição=this.descrição,this.editando_transação.valor=parseFloat(this.valor),this.editando_transação.repetir_mensalmente=this.repetir_mensalmente,this.editando_transação.mês=this.data.getFullYear()+"-"+(this.data.getMonth()+1).toString().padStart(2,0),h.atualizar("transações",this.editando_transação)):h.adicionar("transações",{data:this.data,"descrição":this.descrição,valor:parseFloat(this.valor),repetir_mensalmente:this.repetir_mensalmente,realizada:null,repetida:!1,"mês":this.data.getFullYear()+"-"+(this.data.getMonth()+1).toString().padStart(2,0)}),this.data=b,this.descrição="",this.valor=0,this.repetir_mensalmente=!1,this.abrir_diálogo_adicionar_transação=!1},"editar_transação":function(t){this.editando_transação=t,this.data=new Date(t.data),this.descrição=t.descrição,this.valor=t.valor,this.repetir_mensalmente=t.repetir_mensalmente,this.abrir_diálogo_adicionar_transação=!0},"remover_transação":function(t){return h.remover("transações",t.id)},"atualizar_transação":function(t){t.repetir_mensalmente&&!t.repetida&&(this.data=new Date(t.data),this.data.setMonth(this.data.getMonth()+1),this.descrição=t.descrição,this.valor=t.valor,this.repetir_mensalmente=!0,this.adicionar_transação(),t.repetida=!0),h.atualizar("transações",t)},brl:function(t){return y.format(t)},saldo_dia:function(t){return this.transações.filter((function(a){return a.data<=t.transações[0].data})).map((function(t){return t.valor})).reduce((function(t,a){return t+a}),0)}}},w=S,k=(e("d02e"),e("2877")),x=Object(k["a"])(w,c,d,!1,null,null,null),j=x.exports,O={components:{Transacoes:j}},C=O,D=Object(k["a"])(C,i,o,!1,null,null,null),M=D.exports;n["default"].use(s.a),n["default"].config.productionTip=!1,new n["default"]({render:function(t){return t(M)}}).$mount("#app")},d02e:function(t,a,e){"use strict";e("f001")},f001:function(t,a,e){}});
//# sourceMappingURL=app.7cc8be9f.js.map